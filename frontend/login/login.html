<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Gym App</title>

  <style>
    :root{
      --brand:#004e92;
      --accent:#000428;
      --bg:linear-gradient(90deg,var(--accent),var(--brand));
      --card:#ffffff;
      --muted:#667085;
    }
    *{box-sizing:border-box;font-family:Inter,Arial,Helvetica,sans-serif}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:var(--bg);
      padding:24px;
    }

    .card{
      width:900px;
      max-width:100%;
      display:flex;
      border-radius:12px;
      overflow:hidden;
      box-shadow:0 10px 40px rgba(0,0,0,0.25);
      background:var(--card);
    }

    .left, .right{padding:32px}
    .left{width:55%}
    .right{
      width:45%;
      background:#f4f9ff;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .right img{
      max-width:100%;
      border-radius:8px;
    }

    h1{
      margin:0 0 16px;
      font-size:26px;
      color:var(--brand);
    }

    .field{
      margin-bottom:14px;
      width:100%;
    }

    label{
      display:block;
      font-size:14px;
      color:#1f2937;
      margin-bottom:6px;
    }

    input{
      width:100%;
      padding:12px;
      border-radius:8px;
      border:1px solid #c7d2e0;
      font-size:15px;
      outline:none;
    }

    input:focus{
      border-color:var(--brand);
      box-shadow:0 0 0 3px rgba(0,78,146,0.15);
    }

    button{
      width:100%;
      padding:12px;
      border:0;
      border-radius:8px;
      background:var(--brand);
      color:white;
      font-size:16px;
      font-weight:600;
      cursor:pointer;
      margin-top:10px;
    }

    .msg{
      display:none;
      margin-top:10px;
      padding:10px;
      border-radius:8px;
      font-size:14px;
    }

    .msg.error{background:#ffe5e5;color:#b30000}
    .msg.success{background:#e3ffe8;color:#0c7a20}

    @media(max-width:850px){
      .card{flex-direction:column}
      .left,.right{width:100%}
    }

    /* NAVBAR STYLES */
.navbar {
    width: 100%;
    padding: 18px 50px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #000428;
    color: white;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 10;
}

.navbar h2 {
    font-size: 22px;
    font-weight: 700;
    color: white;
}

.navbar .links a {
    color: white;
    margin-left: 20px;
    text-decoration: none;
    font-size: 15px;
    font-weight: 500;
}

.navbar .links a:hover {
    text-decoration: underline;
}

  </style>
</head>

<body>

<div class="card">
  <!-- LEFT SIDE: LOGIN FORM -->
  <div class="left">
    <h1>Welcome Back</h1>
    <p style="color:var(--muted);margin-bottom:20px;">Log in to access your workouts and dashboard.</p>

    <form id="loginForm">
      <div class="field">
        <label>Email</label>
        <input id="email" type="email" placeholder="Enter your email" required>
      </div>

      <div class="field">
        <label>Password</label>
        <input id="password" type="password" placeholder="Enter your password" required>
      </div>

      <button type="submit">Login</button>

      <div id="errorMsg" class="msg error">Invalid email or password</div>
    </form>

    <p style="margin-top:12px;font-size:14px;color:var(--muted);">
      Don't have an account? <a href="/frontend/register/register.html">Register</a>
    </p>
  </div>

  <!-- RIGHT SIDE: GIF -->
  <div class="right">
    <img src="8.gif" alt="Gym Animation">
  </div>

</div>

          <!-- NAVBAR -->
<nav class="navbar">
  <h2>üèãÔ∏è Gym App</h2>
  <div class="links">
    <a href="/frontend/home/home.html">Home</a>
    <a href="/frontend/login/login.html">Login</a>
    <a href="/frontend/register/register.html">Register</a>
  </div>
</nav>


<script>
  const form = document.getElementById("loginForm");
  const errorMsg = document.getElementById("errorMsg");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const payload = {
      email: document.getElementById("email").value,
      password: document.getElementById("password").value
    };

    try {
      const res = await fetch("http://localhost:8080/api/auth/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      });

      if (!res.ok) {
        errorMsg.style.display = "block";
        return;
      }

      const user = await res.json();
      localStorage.setItem("user", JSON.stringify(user));

      // Redirect based on role
      if (user.role === "TRAINER") {
        window.location.href = "trainer-home.html";
      } else {
        window.location.href = "home.html";
      }

    } catch (err) {
      errorMsg.textContent = "Network error. Try again.";
      errorMsg.style.display = "block";
    }
  });
</script>

</body>
</html>
